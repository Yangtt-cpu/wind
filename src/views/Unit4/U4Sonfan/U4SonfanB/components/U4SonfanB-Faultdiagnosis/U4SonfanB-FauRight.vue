<template>
  <div class="flex flex-col w-full h-full">
    <div class="flex items-center mt-2 ml-3">
      <svg
        t="1712892650815"
        class="icon mt-2 ml-2"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="5207"
        width="40"
        height="40"
      >
        <path
          d="M650.183111 52.337778c68.152889 0 94.151111 31.459556 94.151111 105.642666v230.968889a29.525333 29.525333 0 0 1-59.050666 0V150.698667c-0.227556-36.181333-2.844444-39.310222-35.100445-39.310223H152.860444c-34.702222 0-38.001778 4.323556-38.001777 46.592v714.524445c0 32.085333 5.688889 36.295111 43.349333 36.579555h297.528889a29.525333 29.525333 0 0 1 0 59.050667H165.432889c-74.752 0-109.568-27.534222-109.568-95.630222V157.980444C55.864889 84.764444 84.138667 52.337778 152.860444 52.337778h497.322667z m305.720889 846.620444c14.222222 14.222222 15.644444 36.408889 4.266667 52.224l-4.266667 5.063111a40.334222 40.334222 0 0 1-57.173333 0l-93.866667-93.980444-5.404444 3.697778a217.656889 217.656889 0 0 1-104.106667 34.304l-14.108445 0.455111a219.591111 219.591111 0 0 1-219.249777-219.477334 219.591111 219.591111 0 0 1 219.249777-219.477333 219.591111 219.591111 0 0 1 184.490667 337.863111l-3.697778 5.347556 93.866667 93.980444zM681.187556 530.773333a150.584889 150.584889 0 0 0-150.300445 150.471111 150.584889 150.584889 0 0 0 150.357333 150.471112 150.584889 150.584889 0 0 0 150.300445-150.471112 150.584889 150.584889 0 0 0-150.357333-150.471111z m-253.155556 0.682667a29.525333 29.525333 0 0 1 0 58.993778H204.344889a29.525333 29.525333 0 0 1 0-58.993778h223.800889z m167.879111-153.884444a29.525333 29.525333 0 0 1 0 59.050666H204.288a29.525333 29.525333 0 0 1 0-59.050666h391.623111z m0-153.884445a29.525333 29.525333 0 1 1 0 59.050667H204.288a29.525333 29.525333 0 0 1 0-59.050667h391.623111z"
          fill="#d81e06"
          p-id="5208"
        />
        <path
          d="M650.183111 49.493333c69.006222 0 96.995556 31.914667 96.995556 108.487111v230.968889a32.369778 32.369778 0 0 1-64.739556 0V150.698667c-0.227556-34.816-1.706667-36.465778-32.256-36.465778H152.860444c-32.881778 0-35.157333 2.787556-35.157333 43.747555v714.524445c0 30.151111 3.982222 33.450667 40.504889 33.735111h297.528889a32.369778 32.369778 0 0 1 0 64.739556H165.432889c-77.482667 0-112.412444-29.809778-112.412445-98.474667V157.980444C53.020444 82.602667 83.057778 49.493333 152.860444 49.493333h497.322667z m31.061333 409.429334a222.435556 222.435556 0 0 1 186.823112 342.300444l-3.982223 1.706667 93.866667 94.037333a43.406222 43.406222 0 0 1 4.380444 56.092445l-4.380444 5.12a43.178667 43.178667 0 0 1-61.269333 0.056888l-90.225778-93.639111-5.461333 3.754667a220.558222 220.558222 0 0 1-105.585778 34.702222l-14.222222 0.512a222.435556 222.435556 0 0 1-222.037334-222.321778 222.435556 222.435556 0 0 1 222.094222-222.321777zM650.183111 55.182222H152.860444c-66.56 0-94.151111 30.435556-94.151111 102.798222v714.524445c0 65.308444 32.199111 92.785778 106.723556 92.785778H455.68a26.680889 26.680889 0 1 0 0-53.304889H158.151111c-39.480889-0.398222-46.193778-5.973333-46.193778-39.480889V157.980444c0-43.861333 4.551111-49.493333 40.846223-49.493333h497.322666c33.848889 0 37.660444 4.380444 37.944889 42.211556v238.250666a26.680889 26.680889 0 1 0 53.361778 0v-230.968889c0-73.557333-25.6-102.798222-91.306667-102.798222z m31.061333 409.429334a216.746667 216.746667 0 0 0-216.405333 216.632888 216.746667 216.746667 0 0 0 216.291556 216.632889l13.994666-0.455111a214.755556 214.755556 0 0 0 102.741334-33.792l8.988444-3.413333 93.866667 93.980444a37.546667 37.546667 0 0 0 53.020444 0.170667l4.152889-4.835556a37.660444 37.660444 0 0 0-3.982222-48.526222l-94.208-97.678222 3.640889-5.233778a216.746667 216.746667 0 0 0-182.158222-333.482666z m0 63.317333a153.429333 153.429333 0 0 1 153.144889 153.315555 153.429333 153.429333 0 0 1-153.144889 153.315556 153.429333 153.429333 0 0 1-153.201777-153.315556 153.429333 153.429333 0 0 1 153.201777-153.315555z m0 5.688889a147.740444 147.740444 0 0 0-147.512888 147.626666 147.740444 147.740444 0 0 0 147.512888 147.626667 147.740444 147.740444 0 0 0 147.456-147.626667 147.740444 147.740444 0 0 0-147.456-147.626666z m-253.155555-5.006222a32.369778 32.369778 0 0 1 0 64.682666H204.231111a32.369778 32.369778 0 0 1 0-64.682666h223.800889z m0 5.688888H204.231111a26.680889 26.680889 0 0 0 0 53.304889h223.800889a26.680889 26.680889 0 0 0 0-53.304889z m167.822222-159.573333a32.369778 32.369778 0 0 1 0 64.739556H204.288a32.369778 32.369778 0 0 1 0-64.739556h391.623111z m0 5.688889H204.288a26.680889 26.680889 0 0 0 0 53.361778h391.623111a26.680889 26.680889 0 0 0 0-53.361778z m0-159.573333a32.369778 32.369778 0 1 1 0 64.739555H204.288a32.369778 32.369778 0 0 1 0-64.739555h391.623111z m0 5.688889H204.288a26.680889 26.680889 0 1 0 0 53.361777h391.623111a26.680889 26.680889 0 0 0 0-53.361777z"
          fill="#d81e06"
          p-id="5209"
        />
      </svg>
      <!-- <p class="font-bold mt-1 ml-1" style="font-family: '华文中宋',sans-serif; font-size: 18px;">诊断结果</p> -->
      <el-button type="danger" class="ml-3 mt-2" style="height: 35px"
        >诊断结果</el-button
      >
    </div>
    <div class="flex justify-center items-center">
      <div class="flex basis-3/4 justify-center items-center">
        <p
          id="typed-text"
          class="font-black ml-8 mt-5"
          style="font-family: &quot;黑体&quot;, sans-serif; font-size: 40px"
        >
          {{ faultData.fault_name || "N/A" }}
        </p>
      </div>
      <div
        class="flex flex-col score-value basis-1/4 justify-center items-center"
      >
        <!-- 分数值和评定等级 -->
        <svg
          t="1712893794863"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="7219"
          width="80"
          height="80"
        >
          <path
            d="M648.512 901.568l-34.528 32.64c-27.616 29.632-63.04 44.48-106.336 44.48-43.68 0-80.256-14.72-109.76-44.032l-35.008-33.088-0.32-0.32c-6.72-6.72-14.08-10.048-22.08-10.048h-0.64l-49.248-1.984c-42.08-1.184-77.92-16.736-107.488-46.656-29.216-29.536-44.448-65.152-45.664-106.816l-1.952-48.896v-0.64c0-8-3.36-15.36-10.08-22.08l-0.32-0.32-33.344-35.328c-29.152-30.144-43.744-66.304-43.744-108.48s14.656-78.432 44-108.736l33.088-35.072 0.32-0.32c6.72-6.72 10.08-14.08 10.08-22.08v-0.64l1.952-49.216c1.216-42.112 16.768-77.92 46.656-107.52 29.536-29.216 65.152-44.416 106.848-45.664l48.896-1.92h0.64c8 0 15.36-3.392 22.08-10.08l0.32-0.32 35.328-33.376c30.112-29.152 66.272-43.712 108.48-43.712 42.144 0 78.4 14.656 108.736 43.968l35.04 33.088 0.32 0.32c6.72 6.72 14.08 10.08 22.08 10.08h0.64l49.216 1.984c42.112 1.184 77.92 16.736 107.52 46.624 29.216 29.568 44.448 65.184 45.664 106.88l1.952 48.864v0.64c0 8 3.36 15.36 10.08 22.08l0.32 0.32L921.6 411.52c29.152 30.144 43.744 66.304 43.744 108.48s-14.688 78.4-44 108.736l-35.36 35.392c-6.72 6.72-10.08 14.08-10.08 22.08v0.64l-1.952 49.216c-1.216 42.08-16.768 77.92-46.656 107.488-29.568 29.216-65.152 44.48-106.848 45.696l-48.896 1.92h-0.64c-8 0-15.36 3.392-22.08 10.08l-0.32 0.32z m-80.096-12.352l35.52-33.568c18.944-18.784 41.056-28.288 66.272-28.48l48.352-1.92a91.36 91.36 0 0 0 63.744-27.2c17.728-17.536 26.976-39.04 27.68-64.544l1.92-48c0.192-25.408 9.792-47.616 28.8-66.656l34.624-34.592c17.344-17.92 26.016-39.36 26.016-64.256a89.6 89.6 0 0 0-26.24-64.544l-32.768-34.656c-18.816-18.976-28.288-41.056-28.48-66.304l-1.92-48.32a91.36 91.36 0 0 0-27.2-63.744c-17.568-17.76-39.072-26.976-64.544-27.712l-48.032-1.92c-25.248-0.16-47.36-9.664-66.272-28.48L570.88 151.36a89.152 89.152 0 0 0-64.256-25.984c-24.896 0-46.4 8.736-64.512 26.24l-34.688 32.768c-18.944 18.784-41.056 28.288-66.272 28.48l-48.352 1.92a91.36 91.36 0 0 0-63.744 27.2c-17.728 17.536-26.976 39.04-27.68 64.544l-1.92 48c-0.192 25.248-9.664 47.36-28.48 66.304l-33.024 34.944A89.152 89.152 0 0 0 112 520c0 24.928 8.768 46.4 26.24 64.512l32.768 34.688c18.816 18.976 28.288 41.056 28.48 66.304l1.92 48.32c0.736 24.896 9.792 46.144 27.2 63.744 17.568 17.728 39.04 26.976 64.544 27.712l48 1.92c25.28 0.16 47.36 9.664 66.304 28.48l35.008 33.056 0.32 0.32c17.088 17.056 38.72 25.6 64.864 25.6 24.96 0 44.928-8.192 59.968-24.608l0.8-0.832z m147.392-462.624l-212.704 212.672c-9.376 9.376-20.672 14.08-33.92 14.08-13.28 0-24.576-4.704-33.952-14.08l-131.232-131.2 45.248-45.28 119.936 119.904 201.344-201.344 45.28 45.248z"
            p-id="7220"
            fill="#d81e06"
          />
        </svg>
        <!-- <p v-motion class="font-bold  " style="font-family: '华文中宋',sans-serif; font-size: 38px; color: red;">0.9
        </p> -->
        <span
          v-motion
          class="text-lg font-semibold mt-2"
          style="
            font-family: &quot;华文中宋&quot;, sans-serif;
            font-size: 38px;
            color: red;
          "
          >{{ faultData.degree || "N/A" }}</span
        >

        <span
          class="font-black mt-1"
          style="
            font-family: &quot;黑体&quot;, sans-serif;
            font-size: 25px;
            color: black;
          "
          >置信度</span
        >
      </div>
    </div>
    <!-- 分割线 -->
    <div class="flex justify-center">
      <div class="border-t border-2 border-black w-11/12 mt-0 mb-3" />
    </div>

    <div class="flex flex-col h-full">
      <div class="basis-1/2 flex flex-col bg-white">
        <div class="flex items-center mt-2 ml-3">
          <svg
            t="1712895409276"
            class="icon mt-2 ml-2"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="8372"
            width="40"
            height="40"
          >
            <path
              d="M326.4 422.4l-57.6 96H256l-44.8-32v-12.8c0-32-19.2-57.6-51.2-57.6s-51.2 25.6-51.2 51.2c0 12.8 0 19.2 6.4 25.6L57.6 595.2c-32-6.4-57.6 19.2-57.6 51.2s25.6 51.2 51.2 51.2 57.6-25.6 57.6-51.2c0-12.8 0-19.2-6.4-25.6l57.6-96h12.8l38.4 38.4V576c0 32 25.6 51.2 51.2 51.2S320 601.6 320 576c0-12.8 0-19.2-6.4-32 0 0 57.6-96 64-96l-51.2-25.6z"
              fill="#1296db"
              p-id="8373"
            />
            <path
              d="M332.8 518.4l57.6-96h19.2l160 160v12.8c0 32 25.6 51.2 51.2 51.2 32 0 51.2-25.6 51.2-51.2 0-12.8 0-19.2-6.4-25.6l57.6-96c32 0 51.2-25.6 51.2-51.2 0-32-25.6-51.2-51.2-51.2-32 0-51.2 25.6-51.2 51.2 0 12.8 0 19.2 6.4 25.6l-57.6 96h-19.2L441.6 384v-12.8c0-32-25.6-51.2-51.2-51.2-32 0-51.2 25.6-51.2 51.2 0 12.8 0 19.2 6.4 25.6 0 0-57.6 96-64 96l51.2 25.6z"
              fill="#1296db"
              p-id="8374"
            />
            <path
              d="M838.4 742.4l172.8 172.8c12.8 12.8 12.8 38.4 0 57.6-12.8 12.8-38.4 19.2-57.6 0l-166.4-172.8c-32 25.6-70.4 51.2-108.8 64-51.2 19.2-108.8 32-166.4 32-128 0-249.6-57.6-332.8-153.6-38.4-51.2 19.2-96 70.4-44.8 64 76.8 160 115.2 262.4 115.2 51.2 0 96-6.4 134.4-25.6 44.8-19.2 83.2-44.8 115.2-76.8s57.6-70.4 76.8-115.2c19.2-38.4 25.6-89.6 25.6-134.4 0-44.8-6.4-89.6-25.6-134.4-19.2-44.8-44.8-83.2-76.8-115.2s-70.4-57.6-115.2-76.8c-44.8-12.8-89.6-25.6-140.8-25.6-147.2 0-268.8 89.6-320 211.2-6.4 19.2-19.2 25.6-38.4 25.6-12.8 0-25.6-6.4-32-19.2-6.4-6.4-12.8-25.6-6.4-38.4 70.4-153.6 224-256 396.8-256 57.6 0 115.2 12.8 166.4 32s102.4 51.2 140.8 96c38.4 38.4 70.4 89.6 89.6 140.8 19.2 51.2 32 102.4 32 166.4 0 57.6-12.8 115.2-32 166.4-12.8 38.4-32 76.8-64 108.8z"
              fill="#1296db"
              p-id="8375"
            />
          </svg>
          <!-- <p class="font-bold mt-1 ml-1" style="font-family: '华文中宋',sans-serif; font-size: 18px;">诊断结果</p> -->
          <el-button type="primary" class="ml-3 mt-2" style="height: 35px"
            >原因分析</el-button
          >
        </div>
        <div class="flex justify-center items-center w-full h-full">
          <div
            class="whitespace-normal mx-8 my-2 border-dashed border-2 border-sky-500 p-4 w-full"
          >
            <p
              style="
                font-family: &quot;华文中宋&quot;, sans-serif;
                font-size: 18px;
                line-height: 1.5;
              "
              v-html="
                faultData.fault_reason
                  ? faultData.fault_reason.replace(/\r\n/g, '<br>')
                  : '未获取到故障原因数据'
              "
            />
          </div>
        </div>
      </div>
      <div class="flex justify-center">
        <div class="border-t border-2 border-black w-11/12 mt-0 mb-3" />
      </div>
      <div class="basis-1/2 flex flex-col bg-white rounded-lg">
        <div class="flex items-center mt-2 ml-3">
          <svg
            t="1712895468518"
            class="icon mt-2 ml-2"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="9556"
            width="40"
            height="40"
          >
            <path
              d="M597.333333 42.666667c5.12 0 10.0352 1.501867 14.199467 4.3008l3.8912 3.208533 256 256c3.618133 3.618133 6.007467 8.192 7.031467 13.038933l0.477866 5.051734v512c0 58.026667-44.578133 105.6768-101.376 110.523733l-9.557333 0.4096H503.125333a25.6 25.6 0 0 1-5.188266-50.653867l5.12-0.546133H768a59.733333 59.733333 0 0 0 59.255467-52.224l0.477866-7.509333V334.916267L586.683733 93.866667H256a59.733333 59.733333 0 0 0-59.255467 52.224l-0.477866 7.509333v511.044267a25.6 25.6 0 0 1-50.653867 5.188266l-0.546133-5.188266V153.6c0-58.026667 44.578133-105.6768 101.376-110.523733l9.557333-0.4096h341.333333z"
              fill="#1afa29"
              p-id="9557"
            />
            <path
              d="M597.333333 68.266667v187.733333a68.266667 68.266667 0 0 0 68.266667 68.266667H853.333333"
              fill="#1afa29"
              p-id="9558"
            />
            <path
              d="M394.8544 451.925333A198.0416 198.0416 0 0 0 354.304 638.293333l2.798933 8.6016L170.3936 833.536a86.562133 86.562133 0 0 0 0 122.4704l7.031467 6.280533c33.9968 27.306667 83.831467 25.258667 115.370666-6.280533l186.709334-186.7776 8.669866 2.8672a197.973333 197.973333 0 0 0 236.612267-271.496533 25.6 25.6 0 0 0-41.437867-7.509334L575.010133 601.2928c-1.024 1.024-3.003733 1.024-4.164266-0.136533l-45.806934-45.806934c-1.024-1.024-1.024-3.003733 0.136534-4.232533L633.378133 443.050667a25.6 25.6 0 0 0-7.509333-41.437867 197.973333 197.973333 0 0 0-221.730133 40.413867l-9.284267 9.966933z m294.434133 107.52l1.2288 8.260267a146.773333 146.773333 0 0 1-206.6432 148.2752 25.6 25.6 0 0 0-28.672 5.256533l-198.587733 198.519467a35.362133 35.362133 0 1 1-49.9712-49.9712l198.519467-198.587733c7.509333-7.509333 9.6256-18.909867 5.256533-28.672a146.773333 146.773333 0 0 1 29.969067-164.317867l8.874666-8.192a146.8416 146.8416 0 0 1 109.431467-34.133333l8.192 1.160533L488.789333 515.140267a54.408533 54.408533 0 0 0-0.136533 76.253866l46.148267 46.216534a54.408533 54.408533 0 0 0 76.253866 0.136533l78.2336-78.301867z"
              fill="#1afa29"
              p-id="9559"
            />
          </svg>
          <!-- <p class="font-bold mt-1 ml-1" style="font-family: '华文中宋',sans-serif; font-size: 18px;">诊断结果</p> -->
          <el-button type="success" class="ml-3 mt-2" style="height: 35px"
            >操作指导</el-button
          >
        </div>
        <div class="flex justify-center items-center  w-full h-full">
          <div
            class="whitespace-normal mx-8 border-dashed border-2 border-green-600 p-4 rounded-lg w-full"
          >
            <p
              style="
                font-family: &quot;华文中宋&quot;, sans-serif;
                font-size: 18px;
              "
            >
              {{ faultData.operation_guide || "未获取到操作指导数据" }}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<!-- <script>
export default {
  mounted() {
    const text = "轴不平衡";
    let index = 0;
    const speed = 90; // 逐字显示速度，单位为毫秒
    let typedText = "";

    function typeWriter() {
      if (index < text.length) {
        typedText += text.charAt(index);
        document.getElementById("typed-text").innerHTML = typedText;
        index++;
        setTimeout(typeWriter, speed);
      }
    }

    typeWriter();
  }
};
</script> -->
<script>
import axios from "axios";

export default {
  data() {
    return {
      faultData: {
        degree: null,
        fault_reason: null,
        operation_guide: null,
        fault_name: null
      }
    };
  },
  mounted() {
    this.fetchFaultData();
  },
  methods: {
    fetchFaultData() {
      const apiUrl = "http://localhost:8081/api/device/queryFault?device=四号机送风机B";
      axios
        .post(apiUrl, { device: "四号机送风机B" }) // 根据实际设备名修改
        .then(response => {
           console.log("后端返回数据:", response.data); // 打印返回的数据
          const data = response.data.data;
          if (data) {
            this.faultData.degree = parseFloat(data.degree).toFixed(2); // 保留两位小数
            this.faultData.fault_reason = data.fault_reason
              ? data.fault_reason.replace(/\r\n/g, "<br/>")
          : "无故障原因数据"
            this.faultData.operation_guide = data.operation_guide;
            this.faultData.fault_name = data.fault_name;
          } else {
            console.error("未获取到数据:", response.data);
          }
        })
        .catch(error => {
          console.error("请求失败:", error);
        });
    }
  }
};
</script>

<style scoped>
/* 自定义样式可以保持不变 */
</style>